!function(){"use strict";function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function e(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=e((function t(e,n){r(this,t),this.x=void 0,this.y=void 0,this.x=e,this.y=n}));function o(t,e){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o(t,e)}function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o(t,e)}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},u(t)}function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function c(t,e){if(e&&("object"===f(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function a(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return c(this,r)}}var l=e((function t(){r(this,t),this.command=void 0})),s="convert-card",y=function(t){i(o,t);var n=a(o);function o(t,e,i,u,f){var c,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:s;return r(this,o),(c=n.call(this)).picture=t,c.width=e,c.height=i,c.palleteLength=u,c.metaData=f,c.command=a,c}return e(o,[{key:"getTransfer",value:function(){return[this.picture.buffer]}}],[{key:"from",value:function(t){return new o(t.picture,t.width,t.height,t.palleteLength,t.metaData)}},{key:"is",value:function(t){return t.command===s}}]),o}(l),p="convert-succeed",v=function(t){i(o,t);var n=a(o);function o(t,e){var i,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p;return r(this,o),(i=n.call(this)).rectangleList=t,i.metaData=e,i.command=u,i}return e(o,[{key:"getTransfer",value:function(){return this.rectangleList.map((function(t){return t.buffer}))}}],[{key:"from",value:function(t){return new o(t.rectangleList,t.metaData)}},{key:"is",value:function(t){return t.command===p}}]),o}(l);function h(t,e,r,o){for(var i,u=(i=e,function(t,e){return e*i+t}),f=function(e,r){return t[u(e,r)]<=o},c=function(e,r){return t[u(e,r)]>o},a=new Array(r*e),l=Array(),s=0;s<r;s++)for(var y=0;y<e;y++)a[u(y,s)]=new Array;for(var p=function(t){for(var o=function(o){var i,l,s;if(f(o,t)&&(0===o||c(o-1,t)||0===t||c(o,t-1)))for(l=t;l<=r;l++){if(l!==r){for(i=o;i<e&&f(i,l);i++);i--}else i=-1;if(void 0===s&&(s=i),s>i&&(a[u(s,l-1)].some((function(e){return o>e.x&&t>e.y}))||a[u(s,l-1)].push(new n(o,t)),s=i),i<o)break}},i=0;i<e;i++)o(i)},v=0;v<r;v++)p(v);var h=new Uint8Array(e*r);h.fill(0);for(var b=function(r){var n=a[r];null===n||void 0===n||n.forEach((function(n){for(var i=r%e,f=Math.floor(r/e),c=!1,a=!1,s=n.y;s<=f;s++)for(var y=n.x;y<=i;y++)c=c||0===h[u(y,s)],a=a||t[u(y,s)]===o;if(c&&a){l.push(n.x,n.y,i-n.x+1,f-n.y+1);for(var p=n.y;p<=f;p++)for(var v=n.x;v<=i;v++)h[u(v,p)]=1}}))},d=0;d<a.length;d++)b(d);return Uint32Array.from(l)}self.addEventListener("message",(function(t){var e=t.data;if(y.is(e)){for(var r=[],n=0;n<e.palleteLength;n++)r.push(h(e.picture,e.width,e.height,n));var o=new v(r,e.metaData);postMessage(o,o.getTransfer())}}))}();
//# sourceMappingURL=42.a4fd33b6.chunk.js.map