!function(){"use strict";function r(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function t(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function e(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}var n=t((function r(t,n){e(this,r),this.x=void 0,this.y=void 0,this.x=t,this.y=n})),o=function(){function r(t,n,o,i){e(this,r),this.convertedData=t,this.index=n,this.layer=o,this.color=i}return t(r,[{key:"getTransfer",value:function(){return[this.convertedData.buffer]}}]),r}(),i=function(){function r(t,n,o){e(this,r),this.progress=t,this.working=n,this.result=o}return t(r,[{key:"getTransfer",value:function(){return void 0!==this.result?this.result.getTransfer():[]}}]),r}(),a=self;function f(r,t,e,o,i,a,f,c){for(var s=u(t,e,a,f),h=u(o,i,0,0),l=new Array(i*o),v=Array(),p=0;p<i;p++)for(var d=0;d<o;d++)l[h(d,p)]=new Array;for(var y=function(t){for(var e=function(e){if(r[s(e,t)]<=c&&(0===e||r[s(e-1,t)]>c||0===t||r[s(e,t-1)]>c)){var a,f,u;for(f=t;f<=i;f++){if(f!==i){for(a=e;a<o&&r[s(a,f)]<=c;a++);a--}else a=0;if(void 0===u&&(u=a),u>a&&(l[h(u,f-1)].some((function(r){return e>r.x&&t>r.y}))||l[h(u,f-1)].push(new n(e,t)),u=a),a<e){!1;break}}}},a=0;a<o;a++)e(a)},g=0;g<i;g++)y(g);var w=new Uint8Array(o*i);w.fill(0);for(var b=function(t){var e=l[t];null===e||void 0===e||e.forEach((function(e){for(var n=t%o,i=Math.floor(t/o),a=!1,f=!1,u=e.y;u<=i;u++)for(var l=e.x;l<=n;l++)a=a||0===w[h(l,u)],f=f||r[s(l,u)]===c;if(a&&f){v.push(e.x,e.y,n-e.x+1,i-e.y+1);for(var p=e.y;p<=i;p++)for(var d=e.x;d<=n;d++)w[h(d,p)]=1}}))},x=0;x<l.length;x++)b(x);return Uint32Array.from(v)}function u(r,t,e,n){return function(t,o){return(n+o)*r+(e+t)}}a.addEventListener("message",(function(r){var t=r.data,e=Math.floor(t.pictureHeight/t.cropHeight),n=Math.floor(t.pictureWidth/t.cropWidth),u=n*e*t.colorSet.length,c=t.pictureData.map((function(r){return t.orderTable[r]}));a.postMessage(new i(1/u,!0,void 0));for(var s=0;s<n;s++)for(var h=0;h<e;h++)for(var l=0;l<t.colorSet.length;l++){var v=t.orderTable.indexOf(l);a.postMessage(new i(((s*e+h)*t.colorSet.length+l+1)/u,!0,new o(t.drawFlagTable[v]?new Uint32Array:f(c,t.pictureWidth,t.pictureHeight,t.cropWidth,t.cropHeight,s*t.cropWidth,h*t.cropHeight,l),h+e*s,l,t.colorSet[v])))}a.postMessage(new i(1,!1,void 0))}))}();
//# sourceMappingURL=46.01e1ea3e.chunk.js.map